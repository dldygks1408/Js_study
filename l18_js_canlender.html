<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="./css/l18_calendar.css">
    <title>js calendar</title>
  </head>
  <body>
  <h1>(일정 등록되는)달력 만들기</h1>
    <h2>
       <button id="preMonth" type="button" value="2021-8" class="changeMonth"></button>
       <span id="toDate"></span>
       <button id="nextMonth" type="button" value="2021-10" class="changeMonth"></button>
     </h2>
    <table id="calendarTable">
      <thead>
        <tr>
          <th>일</th>
          <th>월</th>
          <th>화</th>
          <th>수</th>
          <th>목</th>
          <th>금</th>
          <th>토</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            <div class="day_container">
              <h5 class="day"></h5>
              <ul class="schedule">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
            </div>
          </td>
          <td>
            <div class="day_container">
              <h5 class="day"></h5>
              <ul class="schedule">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
            </div>
          </td>
          <td>
            <div class="day_container">
              <h5 class="day"></h5>
              <ul class="schedule">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
            </div>
          </td>
          <td>
            <div class="day_container">
              <h5 class="day"></h5>
              <ul class="schedule">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
            </div>
          </td>
          <td>
            <div class="day_container">
              <h5 class="day"></h5>
              <ul class="schedule">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
            </div>
          </td>
          <td>
            <div class="day_container">
              <h5 class="day"></h5>
              <ul class="schedule">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
            </div>
          </td>
          <td>
            <div class="day_container">
              <h5 class="day"></h5>
              <ul class="schedule">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
            </div>
          </td>
        </tr>
        <tr>
          <td>
            <div class="day_container">
              <h5 class="day"></h5>
              <ul class="schedule">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
            </div>
          </td>
          <td>
            <div class="day_container">
              <h5 class="day"></h5>
              <ul class="schedule">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
            </div>
          </td>
          <td>
            <div class="day_container">
              <h5 class="day"></h5>
              <ul class="schedule">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
            </div>
          </td>
          <td>
            <div class="day_container">
              <h5 class="day"></h5>
              <ul class="schedule">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
            </div>
          </td>
          <td>
            <div class="day_container">
              <h5 class="day"></h5>
              <ul class="schedule">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
            </div>
          </td>
          <td>
            <div class="day_container">
              <h5 class="day"></h5>
              <ul class="schedule">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
            </div>
          </td>
          <td>
            <div class="day_container">
              <h5 class="day"></h5>
              <ul class="schedule">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
            </div>
          </td>
        </tr>
        <tr>
          <td>
            <div class="day_container">
              <h5 class="day"></h5>
              <ul class="schedule">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
            </div>
          </td>
          <td>
            <div class="day_container">
              <h5 class="day"></h5>
              <ul class="schedule">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
            </div>
          </td>
          <td>
            <div class="day_container">
              <h5 class="day"></h5>
              <ul class="schedule">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
            </div>
          </td>
          <td>
            <div class="day_container">
              <h5 class="day"></h5>
              <ul class="schedule">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
            </div>
          </td>
          <td>
            <div class="day_container">
              <h5 class="day"></h5>
              <ul class="schedule">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
            </div>
          </td>
          <td>
            <div class="day_container">
              <h5 class="day"></h5>
              <ul class="schedule">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
            </div>
          </td>
          <td>
            <div class="day_container">
              <h5 class="day"></h5>
              <ul class="schedule">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
            </div>
          </td>
        </tr>
        <tr>
          <td>
            <div class="day_container">
              <h5 class="day"></h5>
              <ul class="schedule">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
            </div>
          </td>
          <td>
            <div class="day_container">
              <h5 class="day"></h5>
              <ul class="schedule">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
            </div>
          </td>
          <td>
            <div class="day_container">
              <h5 class="day"></h5>
              <ul class="schedule">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
            </div>
          </td>
          <td>
            <div class="day_container">
              <h5 class="day"></h5>
              <ul class="schedule">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
            </div>
          </td>
          <td>
            <div class="day_container">
              <h5 class="day"></h5>
              <ul class="schedule">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
            </div>
          </td>
          <td>
            <div class="day_container">
              <h5 class="day"></h5>
              <ul class="schedule">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
            </div>
          </td>
          <td>
            <div class="day_container">
              <h5 class="day"></h5>
              <ul class="schedule">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
            </div>
          </td>
        </tr>
        <tr>
          <td>
            <div class="day_container">
              <h5 class="day"></h5>
              <ul class="schedule">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
            </div>
          </td>
          <td>
            <div class="day_container">
              <h5 class="day"></h5>
              <ul class="schedule">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
            </div>
          </td>
          <td>
            <div class="day_container">
              <h5 class="day"></h5>
              <ul class="schedule">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
            </div>
          </td>
          <td>
            <div class="day_container">
              <h5 class="day"></h5>
              <ul class="schedule">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
            </div>
          </td>
          <td>
            <div class="day_container">
              <h5 class="day"></h5>
              <ul class="schedule">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
            </div>
          </td>
          <td>
            <div class="day_container">
              <h5 class="day"></h5>
              <ul class="schedule">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
            </div>
          </td>
          <td>
            <div class="day_container">
              <h5 class="day"></h5>
              <ul class="schedule">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
            </div>
          </td>
        </tr>
        <tr>
          <td>
            <div class="day_container">
              <h5 class="day"></h5>
              <ul class="schedule">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
            </div>
          </td>
          <td>
            <div class="day_container">
              <h5 class="day"></h5>
              <ul class="schedule">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
            </div>
          </td>
          <td>
            <div class="day_container">
              <h5 class="day"></h5>
              <ul class="schedule">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
            </div>
          </td>
          <td>
            <div class="day_container">
              <h5 class="day"></h5>
              <ul class="schedule">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
            </div>
          </td>
          <td>
            <div class="day_container">
              <h5 class="day"></h5>
              <ul class="schedule">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
            </div>
          </td>
          <td>
            <div class="day_container">
              <h5 class="day"></h5>
              <ul class="schedule">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
            </div>
          </td>
          <td>
            <div class="day_container">
              <h5 class="day"></h5>
              <ul class="schedule">
                <li></li>
                <li></li>
                <li></li>
                <li></li>
                <li></li>
              </ul>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </body>
  <script>
const tdList= document.querySelectorAll("#calendarTable td");
const preMonthBtn = document.getElementById("preMonth");
const nextMonthBtn = document.getElementById("nextMonth");

for(td of tdList){
  td.onmouseenter=(event)=>{
    event.target.querySelector(".schedule").style.visibility="visible";
  }
  td.addEventListener("mouseleave",function(event){
    event.target.querySelector(".schedule").style.visibility="hidden";
  })
}

//new Date().getMonth() 현재 달의 -1을 반환한다. (0~11)
printCaleander(new Date().getMonth()+1);

//function (paraMonth,paraYear="default") 기본값 설정시 꼭 마지막에 지정
//new Date().getYear() : 2000-1900 : 100 , 2021 - 1900 : 121;  new Date().getFullYear() : 바로 반환
function printCaleander(paraMonth,paraYear=(new Date().getYear()+1900)){
  let dateMonth = paraMonth-1; //Date()는 month 가 0 ~ 11 까지다.
  //월 마지막 일 구하기
  let lastDay=new Date(paraYear,dateMonth+1,0).getDate();
  //월의 시작하는 요일 구하기
  let firstDay=new Date(paraYear,dateMonth,1).getDay();
  //전달의 마지막날 구하기
  let lastMonth=new Date(paraYear,dateMonth,0).getDate();

  //해당 날짜 출력
  document.getElementById("toDate").innerText = `${paraYear}년 ${paraMonth}월`;
  nextMonthBtn.innerText = `${paraYear}년 ${paraMonth+1}월`;
  preMonthBtn.innerText = `${paraYear}년 ${paraMonth-1}월`;


  // nextMonthBtn.addEventListener('click', () => {
  //   if(paraMonth < 12){
  //     document.getElementById("toDate").innerText = `${paraYear}년 ${++paraMonth}월`
  //     if(paraMonth < 12){
  //       nextMonthBtn.innerText = `${paraYear}년 ${paraMonth+1}월`;
  //       preMonthBtn.innerText = `${paraYear}년 ${paraMonth-1}월`;
  //       printCaleander(paraMonth,paraYear);
  //     }
  //   }
  // });
  //
  // preMonthBtn.addEventListener('click', () => {
  //   if(paraMonth > 1){
  //     document.getElementById("toDate").innerText = `${paraYear}년 ${--paraMonth}월`
  //     if(paraMonth > 1){
  //       nextMonthBtn.innerText = `${paraYear}년 ${paraMonth+1}월`;
  //       preMonthBtn.innerText = `${paraYear}년 ${paraMonth-1}월`;
  //       printCaleander(paraMonth,paraYear);
  //     }
  //   }
  // });

  //활성화된 해당 월 출력
  for(let i=firstDay,d=1; i<lastDay+firstDay; i++){
    tdList[i].querySelector(".day").innerText=d++;
    tdList[i].classList.add("active"); //활성화된 td 스타일
    tdList[i].classList.remove("disabled");//비활성화된 td 스타일 삭제
  }
  //비활성화된 전달의 출력
  for(let i=firstDay-1; i>=0; i--){
    tdList[i].querySelector(".day").innerText=lastMonth--;
    tdList[i].classList.add("disabled");//비활성화된 td 스타일 추가
    tdList[i].classList.remove("active");//활성화된 td 스타일 삭제
  }
  //비활성화된 다음달 출력
  let nextMonth=firstDay+lastDay
  for(let i=nextMonth,num=1; i<=tdList.length-1; i++){
    tdList[i].querySelector(".day").innerText=num++;
    tdList[i].classList.add("disabled");//비활성화된 td 스타일
    tdList[i].classList.remove("active"); //활성화된 td 스타일 삭제
  }

}

document.querySelectorAll(".changeMonth[type=button]").forEach((item) => {
  item.addEventListener('click', (e)=>{
    let yearMonthArray = e.target.value.split("-");
    printCaleander(Number(yearMonthArray[1]),Number(yearMonthArray[0]));
  });
});
//13월 넘어가는거 수정 0월 에 넘어가는거 수정 // 12로 나눈 나머지로 해보자
//classList.add css 수정 & 초기화 작업

</script>
</html>
