<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script defer src="l31_js_ajax.js"></script>
</head>
<body>
  <h1>비동기적으로 페이지 호출하기</h1>
  <button id ="loadRoot">root body 불러오기</button>
  <div id="printRoot">

  </div>
  <article>
    <h2>통신과 비동기식 통신</h2>
    <ul>
      <li>통신 : 어떤것을 주고 받는 행위</li>
      <li>http 통신 : html 문서를 요청하고 받는 행위</li>
      <li>브라우저의 통신 : http 통신</li>
      <li>브라우저의 동기식 통신 : 브라우저의 주소창에서 주소 html 문서를 요청하고 
        html 문서를 받으면 화면이 해당 페이지로 전환되는 것
      </li>
      <li>iframe 이용한 비동기식 통신 : iframe 태그 안에서 다른 페이지를 불러오는 것</li>
      <li>브라우저의 비동기식 통신(AJAX) : html 문서안에서 다른 다른 페이지(xml,html,json...)를
        불러오기 위해 http 통신을 하는 것
      </li>
    </ul>
  </article>
  <article>
    <h2>XMLHttpRequest 객체와 비동기식 통신</h2>
    <ul>
      <li>html 문서안에서 다른 페이지를 호출하고 처리하기 위해 사용하는 객체</li>
      <li>XMLHttpRequest.open(method, url, async(default : true)) : 요청 할 페이지를 준비</li>
      <li>XMLHttpRequest.onreadystatechange=(callback func) : 통신하면(이벤트) 실행되는 함수</li>
      <li>XMLHttpRequest.send() : 실제로 통신해서 페이지를 불러온다.</li>
    </ul>

  </article>
  <article>
    <h2>XMLHttpRequest.status == HTTP response status codes</h2>
    <p>통신의 응답 상태로 모든 http 통신에서 사용되는 코드다.</p>
    <p>http 응답 상태 코드는 http 요청이 성공적인지 확인하는 코드로 총 5단계로 나뉜다.</p>

    <h2>HTTP 응답 상태 코드</h2>
    <ul>
      <li>100 ~ 199 : 정보 응답</li>
      <li>200 ~ 299 : 성공 응답</li>
      <ul>
        <li>200 : ok</li>
        <ul>
          <li>GET : 응답 리소스를 받아서 바디에 전송</li>
          <li>POST : 요청 헤더에 메세지(파라미터)를 전송한다. 요청을 처리한다.</li>
        </ul>
      </ul>
      <li>300 ~ 399 : 리렉션 메세지</li>
      <li>400 ~ 499 : 클라이언트 오류</li>
      <ul>
        <li>400 : 요청하는 방식이 잘못되었음 (method) </li>
        <li>404 : 요청하는 페이지가 없음</li>
      </ul>
      <li>500 ~ 599 : 서버 오류</li>
    </ul>
  </article>
  <article>
    <h2>XMLHttpRequest.readyState 종류</h2>
    <p>요청의 처리 상태</p>
    <p>XMLHttpRequest는 통신을 위해 총 5단계의 실행을 거친다.</p>
    <p>readyState == 4 , readyState == this.DONE 숫자로 표현 할 수 있다.</p>
    <ul>
      <li>0 UNSENT : 미전송상태로 new로 XMLHttpRequest 객체를 생성하기만한 상태
                     클라이언트 생성, open()이 호출되기 전</li>
      <li>1 OPENED : open() 메소드를 실행한 상태로 요청 헤더(setRequestHeader()) 사용 할 수 있고
                     ※send()로 요청 할 수 있다.
      </li>
      <li>2 HEADERS_RECEIVED : send() 호출하고 응답 헤더가 수신(onreadystatechange가 실행)</li>
      <li>3 LOADING : 본문을 수신하고 해석하는 중
                      다운로드 중 / responseText는 부분 데이터 보유</li>
      <li>4 DONE : 정상 준비 완료 상태 (성공 & 실패)</li>
    </ul>
  </article>  

</body>
</html>